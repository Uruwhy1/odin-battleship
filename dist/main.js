(()=>{"use strict";var n={365:(n,e,t)=>{t.d(e,{A:()=>i});var r=t(601),o=t.n(r),a=t(314),l=t.n(a)()(o());l.push([n.id,"@import url(https://fonts.googleapis.com/css?family=Kode+Mono&display=swap);"]),l.push([n.id,"* {\n  box-sizing: border-box;\n}\n\n:root {\n  --blue: #355c7d;\n  --purple: #6c5b7b;\n  --pink: #c06c84;\n}\n\n/* ANIMATIONS */\n\n@keyframes wrong {\n  0% {\n    background-color: initial;\n  }\n  25% {\n    background-color: #be2d2d;\n    transform: rotate(5deg);\n  }\n  50% {\n    transform: rotate(0deg)\n  }\n  66% {\n    background-color: #be2d2d;\n    transform: rotate(-5deg);\n  }\n\n  100% {\n    background-color: initial;\n  }\n}\n\n@keyframes bigger-alert {\n  0% {\n    background-color: #000;\n    transform: scale(1);\n  }\n  20% {\n    background-color: #be2d2d;\n    transform: scale(1.3);\n  }\n  40% {\n    background-color: #000;\n  }\n  60% {\n    background-color: #be2d2d;\n    transform: scale(1.3);\n  }\n  80% {\n    background-color: #be2d2d;\n    transform: scale(1.3);\n  }\n  100% {\n    background-color: #000;\n    transform: scale(1);\n  }\n}\n\n@keyframes bigger-green {\n  0% {\n    background-color: #000;\n    transform: scale(1);\n  }\n  20% {\n    background-color: #4abe2d;\n    transform: scale(1.3);\n  }\n  40% {\n    background-color: #000;\n    transform: scale(1.25);\n  }\n  60% {\n    background-color: #4abe2d;\n    transform: scale(1.3);\n  }\n  80% {\n    background-color: #4abe2d;\n    transform: scale(1.3);\n  }\n  100% {\n    background-color: #000;\n    transform: scale(1);\n  }\n}\n\n@keyframes game-ending {\n  0% {\n    background-color: #000;\n    transform: scale(1);\n  }\n  20% {\n    background-color: var(--blue);\n    transform: scale(1.5);\n  }\n  40% {\n    background-color: #000;\n    transform: scale(1.4);\n  }\n  60% {\n    background-color: var(--blue);\n    transform: scale(1.5);\n  }\n  80% {\n    background-color: var(--blue);\n    transform: scale(1.5);\n  }\n  100% {\n    background-color: #000;\n    transform: scale(1);\n  }\n}\n/* ----------------------*/\n\nbody {\n  width: 100vw;\n  height: 100vh;\n  margin: 0;\n  padding: 0;\n\n\n  font-family: 'Kode Mono';\n  font-size: 15px;\n}\n.container {\n  width: 100%;\n  height: 100%;\n\n  display: grid;\n  grid-template-rows: 96% 4%;\n  grid-template-areas:\n    'main'\n    'footer';\n}\n\n.result {\n  font-size: 1.5em;\n  color: #fff;\n  background-color: #000;\n\n  padding: 5px;\n  margin-bottom: 50px;\n}\n\n/* FOOTER STYLING */\n.footer {\n  grid-area: footer;\n  background-color: var(--purple);\n\n  color: #fff;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.footer .text {\n  display: flex;\n  gap: 5px;\n  justify-content: center;\n  align-items: center;\n\n  color: #fff;\n  background-color: #000;\n  padding: 10px 5px;\n  height: 50%;\n}\n\n.footer a {\n  color: rgb(124, 251, 255);\n  text-decoration: none;\n}\n.footer a:hover {\n  text-decoration: underline;\n}\n/* ---------------- */\n\n/* BOARDS STYLING */\n.main-area {\n  grid-area: main;\n  background-color: var(--purple);\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n.board-area {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 50px;\n}\n.player {\n  background-color: var(--pink);\n  width: 400px;\n  height: fit-content;\n  padding: 20px 0;\n\n  text-align: center;\n  color: yellow;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n.player h1 {\n  color: #fff;\n  font-weight: 300;\n\n  background-color: #000;\n  padding: 5px;\n  margin: 0 0 20px 0;\n}\n\n.board {\n  background-color: var(--blue);\n  border: 1px solid #fff;\n\n  width: 340px;\n  height: 340px;\n\n  display: grid;\n  grid-auto-flow: column;\n  grid-template-columns: 34px;\n}\n.column {\n  display: flex;\n  flex-direction: column;\n}\n.ship {\n  background-color: yellow;\n}\n.ship-preview {\n  background-color: rgb(21, 255, 0);\n}\n.hit {\n  background-color: red;\n}\n.missed {\n  background-color: gray;\n}\n\n/*\n6c5b7b\n355c7d\nc06c84\n*/\n\n/* -------------------------- */\n\n/* BUTTONS STYLING */\n.game-settings {\n  padding-top: 50px;\n\n  width: 500px;\n  height: 50px;\n\n  display: flex;\n  gap: 50px;\n  justify-content: center;\n}\nbutton {\n  width: 156px;\n  height: 45px;\n\n  border-radius: 0;\n  border: 1px solid #fff;\n\n  background-color: var(--blue);\n  color: #fff;\n\n  font: inherit;\n  font-size: 1.3em;\n\n  transition: 0.1s;\n}\nbutton:hover {\n  transform: scale(1.1);\n  cursor: pointer;\n}\nbutton:active {\n  transform: scale(1.0);\n}\n\n\n/* ------------------------ */\n\n/* PLACEMENT WINDOW */\n.placement {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n\n  background-color: var(--purple);\n\n  display: flex;\n  gap: 50px;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n.placement p {\n  background-color: #000;\n  color: #fff;\n  font-size: 1.5em;\n\n  margin: 0;\n  padding: 5px;\n}\n\n.options-container {\n  display: flex;\n  gap: 30px;\n}\n.options-container button {\n  background-color: var(--pink);\n}\n",""]);const i=l},314:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t="",r=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),r&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),r&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t})).join("")},e.i=function(n,t,r,o,a){"string"==typeof n&&(n=[[null,n,void 0]]);var l={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(l[c]=!0)}for(var s=0;s<n.length;s++){var d=[].concat(n[s]);r&&l[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),e.push(d))}},e}},601:n=>{n.exports=function(n){return n[1]}},72:n=>{var e=[];function t(n){for(var t=-1,r=0;r<e.length;r++)if(e[r].identifier===n){t=r;break}return t}function r(n,r){for(var a={},l=[],i=0;i<n.length;i++){var c=n[i],s=r.base?c[0]+r.base:c[0],d=a[s]||0,u="".concat(s," ").concat(d);a[s]=d+1;var p=t(u),m={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)e[p].references++,e[p].updater(m);else{var f=o(m,r);r.byIndex=i,e.splice(i,0,{identifier:u,updater:f,references:1})}l.push(u)}return l}function o(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,o){var a=r(n=n||[],o=o||{});return function(n){n=n||[];for(var l=0;l<a.length;l++){var i=t(a[l]);e[i].references--}for(var c=r(n,o),s=0;s<a.length;s++){var d=t(a[s]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}a=c}}},659:n=>{var e={};n.exports=function(n,t){var r=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},540:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},56:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,o&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(r,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},113:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}},e={};function t(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={id:r,exports:{}};return n[r](a,a.exports,t),a.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var r in e)t.o(e,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:e[r]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.nc=void 0;var r={};(()=>{t.d(r,{C:()=>M});class n{constructor(n){this.length=n,this.timesHit=0,this.sunk=!1}hit(){this.timesHit++,this.isSunk()}isSunk(){return this.length==this.timesHit&&(this.sunk=!0,!0)}}class e{constructor(){this.board=Array.from({length:10},(()=>Array.from({length:10},(()=>null)))),this.memory=[],this.ships=[]}placeShipRandomly(n,e){let t=!1;for(;!t;){const r=Math.random()<.5?"horizontal":"vertical",o=Math.floor(10*Math.random()),a=Math.floor(10*Math.random());t=this.placeShip([o,a],n,r,e)}return t}placeShip(e,t,r,o){const a=e[0],l=e[1];if(!this.__checkCoordinates(a,l,t,r))return!1;const i=new n(t);this.ships.push(i);for(let n=0;n<t;n++){let e="vertical"===r?a+n:a,t="horizontal"===r?l+n:l;this.board[e][t]=i,"human"==o&&this.__updateDOMCell(e,t)}return!0}__checkCoordinates(n,e,t,r){if(n>9||e>9||n<0||e<0)return null;if("vertical"===r){if(n+t>10)return null}else if("horizontal"===r&&e+t>10)return null;if(null!==this.board[n][e])return null;for(let o=0;o<t;o++){let t="vertical"===r?n+o:n,a="horizontal"===r?e+o:e;if(null!==this.board[t][a])return null}return!0}__updateDOMCell(n,e){document.querySelectorAll(`.player-board .cell[data-row="${n}"][data-col="${e}"]`).forEach((n=>{n.classList.add("ship")}))}receiveAttack(n,e){return n>9||e>9||n<0||e<0||this.memory.some((t=>{let[r,o]=t;return r===n&&o===e}))?null:(this.memory.push([n,e]),null!==this.board[n][e]&&(this.board[n][e].hit(),this.__checkShips()))}__checkShips(){return!this.ships.every((n=>n.isSunk()))||-1}}class o{constructor(n){this.type=n,this.board=new e}placeShip(n,e,t){this.board.placeShip(n,e,t,this.type)}}function a(n){n.innerHTML="";for(let e=0;e<10;e++){const t=document.createElement("div");t.classList.add("column");for(let n=0;n<10;n++){const r=document.createElement("div");r.classList.add("cell"),r.dataset.row=n,r.dataset.col=e,r.style.width="34px",r.style.height="34px",r.style.border="1px solid #fff",t.appendChild(r),r.addEventListener("mouseenter",(n=>l(n))),r.addEventListener("mouseleave",i),r.addEventListener("mouseup",i)}n.appendChild(t)}}function l(n){const e=n.target,t=parseInt(e.dataset.row),r=parseInt(e.dataset.col),o=M.direction;!function(n,e,t,r){if(1!=t)if("horizontal"===r){if(e+t<=10)for(let r=0;r<t;r++){const t=document.querySelector(`[data-row="${n}"][data-col="${e+r}"]`);t&&t.classList.add("ship-preview")}}else if(n+t<=10)for(let r=0;r<t;r++){const t=document.querySelector(`[data-row="${n+r}"][data-col="${e}"]`);t&&t.classList.add("ship-preview")}}(t,r,M.count,o)}function i(){document.querySelectorAll(".ship-preview").forEach((n=>n.classList.remove("ship-preview")))}var c=t(72),s=t.n(c),d=t(825),u=t.n(d),p=t(659),m=t.n(p),f=t(56),h=t.n(f),g=t(540),y=t.n(g),b=t(113),v=t.n(b),x=t(365),k={};k.styleTagTransform=v(),k.setAttributes=h(),k.insert=m().bind(null,"head"),k.domAPI=u(),k.insertStyleElement=y(),s()(x.A,k),x.A&&x.A.locals&&x.A.locals;const M={resultText:document.querySelector(".result"),lastMoveMemory:[],lastDirection:[],forgetMoveCounter:0,computerBoardElement:null,humanBoardElement:null,computerPlayer:null,humanPlayer:null,placementBoardBoard:new e,count:6,direction:"vertical"};function w(n){const e=n.target;if(!e.classList.contains("cell"))return;const t=parseInt(e.dataset.row),r=parseInt(e.dataset.col);if(!M.computerPlayer.board.memory.some((n=>{let[e,o]=n;return e===t&&o===r}))){switch(M.computerPlayer.board.receiveAttack(t,r)){case!0:e.classList.add("hit"),console.log("HITT");break;case!1:e.classList.add("missed");break;case-1:e.classList.add("hit"),M.computerBoardElement.removeEventListener("click",w),M.resultText.style.animation="game-ending 1.5s forwards",setTimeout((()=>{M.resultText.style.animation="none"}),1500),M.resultText.textContent="Game END! Human victory.";break;default:console.log("Unexpected result")}S(M.humanPlayer)}}function S(n){let e,t;if(M.lastMoveMemory.length>0){let[r,o]=M.lastMoveMemory[M.lastMoveMemory.length-1];const a=[[0,1],[1,0],[0,-1],[-1,0]];if(0===M.lastDirection.length)for(const[l,i]of a){const a=r+l,c=o+i;if(a>=0&&a<10&&c>=0&&c<10&&!n.board.memory.some((n=>{let[e,t]=n;return e===a&&t===c}))){M.lastDirection.push([l,i]),M.lastDirection.push([-l,-i]),e=a,t=c,console.log("undirected: last hit based");break}}else for(const[a,l]of M.lastDirection){const i=r+a,c=o+l;if(i>=0&&i<10&&c>=0&&c<10&&!n.board.memory.some((n=>{let[e,t]=n;return e===i&&t===c}))){e=i,t=c,console.log("directed: last hit based");break}}}if((void 0===e||void 0===t)&&M.lastMoveMemory.length>1)return M.lastMoveMemory.pop(),void S(n);if(void 0===e||void 0===t)do{e=Math.floor(10*Math.random()),t=Math.floor(10*Math.random())}while(n.board.memory.some((n=>{let[r,o]=n;return r===e&&o===t})));const r=document.querySelector(`.left-player .board .cell[data-row="${e}"][data-col="${t}"]`);switch(M.humanPlayer.board.receiveAttack(e,t)){case!0:r.classList.add("hit"),M.lastMoveMemory.push([e,t]),M.forgetMoveCounter=0;break;case!1:r.classList.add("missed"),M.forgetMoveCounter++,M.lastDirection.pop();break;case-1:r.classList.add("hit"),M.computerBoardElement.removeEventListener("click",w),M.resultText.style.animation="game-ending 1.5s forwards",setTimeout((()=>{M.resultText.style.animation="none"}),1500),M.resultText.textContent="Game END! Computer victory.";break;default:console.log("Unexpected result")}M.forgetMoveCounter>2&&(M.lastDirection=[]),M.forgetMoveCounter>4&&(M.lastMoveMemory.shift(),M.forgetMoveCounter=0)}document.addEventListener("DOMContentLoaded",(()=>{const n=document.querySelector(".placement"),t=document.querySelector(".change-positions");t.addEventListener("click",(()=>{n.style.display="flex",t.style.display="none"}));const r=document.querySelector(".placement .board"),l=document.querySelector(".placement p"),i=document.querySelector(".direction"),c=document.querySelector(".reset"),s=document.querySelector(".random");function d(){1===M.count?l.textContent="All ships placed!":l.textContent=`Place ${M.count}-length ship`}a(r),c.addEventListener("click",(()=>{a(r),M.count=6,M.placementBoardBoard=new e,l.textContent=`Place ${M.count}-length ship`})),i.addEventListener("click",(()=>{"vertical"===M.direction?(M.direction="horizontal",i.textContent="horizontal"):(M.direction="vertical",i.textContent="vertical")})),r.addEventListener("mouseup",(n=>{if(1===M.count)return null;const e=n.target,t=parseInt(e.dataset.row),r=parseInt(e.dataset.col);if(!M.placementBoardBoard.placeShip([t,r],M.count,M.direction,"human"))return null;M.count--,d()})),s.addEventListener("mouseup",(()=>{1==M.count?(s.style.animation="wrong 0.5s linear",l.style.animation="bigger-green 1.5s linear 1",setTimeout((()=>{s.style.animation=""}),500),setTimeout((()=>{l.style.animation=""}),1500)):(M.placementBoardBoard.placeShipRandomly(M.count,"human"),M.count--,d())})),document.querySelectorAll(".create-game").forEach((e=>{e.addEventListener("click",(()=>{var i,c;1!==M.count?(e.style.animation="wrong 0.5s linear 1",l.style.animation="bigger-alert 1.5s linear 1",setTimeout((()=>{e.style.animation=""}),500),setTimeout((()=>{l.style.animation=""}),2e3)):(n.style.display="none",t.style.display="block",i=M.placementBoardBoard,c=r,M.humanBoardElement=document.querySelector(".left-player .board"),M.computerBoardElement=document.querySelector(".right-player .board"),M.resultText.display="none",M.humanBoardElement.innerHTML="",M.computerBoardElement.innerHTML="",M.computerBoardElement.removeEventListener("click",w),M.lastMoveMemory=[],M.lastDirection=[],M.forgetMoveCounter=0,a(M.humanBoardElement),M.humanBoardElement.innerHTML=c.innerHTML,M.humanPlayer=new o("human"),M.humanPlayer.board=i,M.computerPlayer=new o("computer"),M.computerPlayer.board.placeShipRandomly(5),M.computerPlayer.board.placeShipRandomly(3),M.computerPlayer.board.placeShipRandomly(2),M.computerPlayer.board.placeShipRandomly(4),M.computerPlayer.board.placeShipRandomly(6),a(M.computerBoardElement,M.computerPlayer),M.computerBoardElement.addEventListener("click",w))}))}))}))})()})();